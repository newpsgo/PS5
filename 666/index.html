<html manifest="Cache.manifest">
<head>
    <title>PSGO 全自动折腾 - PS5.PSGO.eu.org</title>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	
	<script>
var auto;		
window.applicationCache.ondownloading = function()
{
	auto = 1;
	alert("折腾缓存有新的版本！\n\n点击确定按钮将开始缓存！缓存完成之前请不要操作！\n\n如果缓存失败请重新打开窗口再次缓存！")
};

window.applicationCache.onprogress = function(a)
{
	document.getElementById("consoles").innerHTML="<h3>正在缓存中！请耐心等待！不要操作！缓存进度: "+(Math.round(100*(a.loaded/a.total)))+"% </h3>";
};

window.applicationCache.oncached = window.applicationCache.onupdateready = function()
{
	if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {
	
		window.applicationCache.swapCache();
        window.location.reload();
		alert("已将新缓存覆盖老缓存！")
	}
	
	for (var i = 1; i <= 99; i++) {
    
		alert("缓存完成！\n\n长按PS键回到桌面后再次进入本页面！（建议最好现在重启一次！）\n\n现在可以断开网络离线使用！记得定期打开PS5网络更新缓存！ \n\n如果折腾遇到连续失败，建议清除缓存后重新缓存！")
		document.location.href = "index.html";	
	}
};
	
window.applicationCache.onnoupdate = function(){
    setTimeout(function() {document.getElementById('onekey').click();}, 500);
}

window.applicationCache.onerror = function(){
    
	if (auto != 1)
	{
		setTimeout(function() {document.getElementById('onekey').click();}, 1500);
	}
	else
	{
		alert("网络不稳定，缓存失败！ \n\n点击确定尝试再次缓存或请重新打开窗口，如果持续缓存失败请关闭PS5网络使用离线进行折腾！\n\n首次缓存请检查网络问题或稍后再试！否则无法使用离线进行折腾！ \n\n也可以尝试连接手机热点");
		window.applicationCache.update();
	}	
}
</script>
<script>
    let hidder=0;
    if(!navigator.userAgent.includes('PlayStation 5')) 
    hidder=1;
    const supportedFirmwares = ["4.03", "4.50", "4.51"];
    const fw_idx = navigator.userAgent.indexOf('PlayStation; PlayStation 5/') + 27;
    const fw_str = navigator.userAgent.substring(fw_idx, fw_idx+4);

    if(!supportedFirmwares.includes(fw_str)) 
    hidder=1;
    const sleep = (timeountMS) => new Promise((resolve) => {
        setTimeout(resolve, timeountMS);
    });
    blockjb = (string,done=0)=>{
        document.body.onload=null;
        window.ing.style.visibility="hidden";
        window.onekey.style.display="None";
        window.pl_sw.style.display="None";
        if(done==0){
        window.terminaltitle.style.display='None';
        window.consoles.style.display='None';
        }
        window.msgs.innerText=string;
    }
    function change_oneclick(idx,name,val){
        document.getElementById(idx).innerHTML=name;
        document.getElementById(idx).value=val;
        localStorage.setItem(idx+"Name", name);
        localStorage.setItem(idx+"VAL", val);
        return;
    };

    let log = function(string) {
        window.consoles.innerHTML = fw_str +" - " + string;
        window.consoles.scrollTop = window.consoles.scrollHeight;
    }
</script>
<style>
h1 {
text-shadow: 0.1em 0.1em 0.2em black;
font-size: 25px;
text-align: center;
color: white;
}
body{background-color:black;color: #f5f1f1;border: 5px solid #603bcc;font-size:28px;text-align:center;}
.bottopmsg{position:absolute;bottom: 34px;width: 1520px;padding:5px 0 1px 0;}

div#bottommsg {}
.loader {position: absolute;left: 50%;top: 55%;margin: -75px 0 0 -75px;border: 10px solid #1f1e1e;border-radius: 50%;border-top: 10px solid #603bcc;border-left: 10px solid #603bcc;width: 120px;height: 120px;animation: spin 1s linear infinite;}
@keyframes spin {0% {transform: rotate(0deg);}100% {transform: rotate(360deg);}}
</style>
</head>
<body onload="
let fwScript = document.createElement('script');
document.body.appendChild(fwScript);
fwScript.onload = function() {
    let webkitScript = document.createElement('script');
    webkitScript.setAttribute('src', `webkit.js`);
    document.body.appendChild(webkitScript);
    throw new Error('');
};
fwScript.setAttribute('src', `offsets/${fw_str}.js`);

">
<div id="loader" class="loader"></div>
    <br>
    <div>
	<h1 style="font-size:60px;text-align:center;font-style:italic;"><font color="#603bcc">PSGO 全自动折腾离线版 4.03 & 4.50 & 4.51</font></h1> 
    <div id="consoles" class="msgs" style="font-size:30px;text-align:center;font-weight:bold;">开机后稍等15秒 · 关机待机前关游戏 · 内存提示点确定 · 失败死机则重启 · 折腾成功后不要重复进入</div>
    </div>
	<div style="display: none;">
	
<h1 class="webname"></h1>
<div id="terminal">
    <div id="terminaltitle" class="terminaltitle terminal">terminal</div>
<textarea id="consoles---" class="log terminal"></textarea>
</div>

<div>
<h2 id="msgs"></h2>
</div>
<div style="display:inline-block; margin-top: 4%;">
    <div id="onekey" class="button onekey"  onclick="run();" value="ps5-kstuff.bin">一键</div>
    <div class="dropdown">
        <div id="pl_sw" class="dropbtn">▶</div>
        <div class="dropdown-content">
          <a onclick="change_oneclick('onekey', '一键 Kstuff', 'ps5-kstuff.bin')"  onmouseover="window.msgs.innerText='基于原生KStuff, 别问问就是稳了.';" onmouseout="window.msgs.innerHTML='';">S大 Kstuff</a>
          <!-- <a onclick="change_oneclick('onekey', '一键 etaHEN', 'etaHEN.bin')" onmouseover="window.msgs.innerText='etaHEN 来自 LM,自带Kstuff,金手指\nFTP(1337),ELF-LOADER(9027),阻止更新等';" onmouseout="window.msgs.innerHTML='';" >LM etaHEN</a> -->
        </div>
      </div>
    </div>
<div id='ing' class='processing' style="visibility:hidden"></div> 

<div id="footer" >
    <div>
<select id="add_noti" style="color: black;border-radius: 8px;font-size: 20px;">
	<option value ="1"style="background-color: black;">加通知快捷</option>
    <option value ="0"style="background-color: black;">删通知快捷</option>
</select>
</div>
        <div id="version">
    Ver.##zerofo Test
    </div>
     核心代码来自:
    <a href="https://github.com/Cryptogenic/PS5-IPV6-Kernel-Exploit"> Specter </a> , 
     Kstuff 代码来自:
    <a href="https://github.com/sleirsgoevy/ps4jb-payloads"> sleirsgoevy</a> 
<hr>
网站 仅用于 个人交流学习. 不以此牟利, 亦未因此获取任何利益. <br>
您支付的任何费用与本人无关.
</div>
</div>
</body>
<script>
    if (hidder)blockjb("暂不支持你的系统版本");
    <!-- localStorage.clear(); -->
    name = localStorage.getItem("onekeyName")||'一键 Kstuff';
    val = localStorage.getItem("onekeyVAL")||'ps5-kstuff.bin';
    window.onekey.innerText = name;
    window.onekey.value = val;

</script>
<script defer src="int64.js"></script>
<script defer src="rop.js"></script>
<script defer src="exploit.js"></script>

</html>
